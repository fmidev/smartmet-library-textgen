/*!
\page page_tarinat Tarinat

<ol>
<li>\ref sec_tarina</li>
<li>\ref sec_storyfactory</li>
<li>\ref sec_specialstory</li>
<li>\ref sec_temperaturestory</li>
 <ol>
 <li>\ref sec_story_temperature_mean</li>
 <li>\ref sec_story_temperature_meanmax</li>
 <li>\ref sec_story_temperature_meanmin</li>
 </ol>
<li>\ref sec_precipitationstory</li>
 <ol>
 <li>\ref sec_story_precipitation_total</li>
 <li>\ref sec_story_precipitation_range</li>
 <li>\ref sec_story_precipitation_classification</li>
 </ol>
<li>\ref sec_froststory</li>
 <ol>
 <li>\ref sec_story_frost_mean</li>
 <li>\ref sec_story_frost_maximum</li>
 <li>\ref sec_story_frost_range</li>
 <li>\ref sec_story_frost_maxtwonights</li>
 </ol>
<li>\ref sec_relativehumidity_story</li>
 <ol>
 <li>\ref sec_story_relativehumidity_lowest</li>
 </ol>
</ol>

\section sec_tarina Mikä on tarina

Tarina on yksittäinen kappale, joka sisältää yksittäiseen sääparametriin
liittyvän kuvauksen. Kappale voi olla tyhjä jos parametrista ei ole
mitään kerrottavaa, tai se voi koostua yhdestä tai useammasta virkkeestä.

\section sec_storyfactory StoryFactory namespace

TextGen::StoryFactory namespace sisältää create funktion,
jolla voidaan luoda erikseen nimettyjä tarinoita.

\section sec_specialstory Erikoistarinat

Kaksi normaalista poikkeavaa tarinaa ovat "none", joka palauttaa tyhjän
Paragraph objektin, sekä "break", joka palauttaa Paragraph objektin
joka sisältää vain yhden Delimiter objektin. Delimiter objektin
sisältö on newline-merkki.

\section sec_temperaturestory TemperatureStory luokka

TextGen::TemperatureStory luokka hallitsee lämpötilaan liittyvät tarinat.

\subsection sec_story_temperature_mean "temperature_mean"

\c temperature_mean tarina on muotoa

  -# "Keskilämpötila N astetta."

Ruotsiksi

  -# "Medeltemperaturen N grader."

Englanniksi

  -# "Mean temperature N degrees."

Käytetyt fraasit ovat

  - "keskilämpötila"
  - "astetta"

\subsection sec_story_temperature_meanmax "temperature_meanmax"

\c temperature_meanmax tarina on muotoa

  -# "Keskimääräinen ylin lämpötila N astetta."

Ruotsiksi

  -# "Den högsta temperaturen i medeltal N grader."

Englanniksi

  -# "Mean maximum temperature N degrees."

Käytetyt fraasit ovat

  - "keskimääräinen ylin lämpötila"
  - "astetta"

\subsection sec_story_temperature_meanmin "temperature_meanmin"

\c temperature_meanmin tarina on muotoa

  -# "Keskimääräinen alin lämpötila N astetta."

Ruotsiksi

  -# "Den lägsta temperaturen i medeltal N grader."

Englanniksi

  -# "Mean minimum temperature N degrees."

Käytetyt fraasit ovat

  - "keskimääräinen alin lämpötila"
  - "astetta"

\section sec_precipitationstory PrecipitationStory luokka

TextGen::PrecipitationStory luokka hallitsee sateeseen liittyvät tarinat.

Yksi keskeinen ongelma on se, miten sadesumma määritellään. Esimerkiksi
kun puhutaan alueen keskimääräisestä sadesummasta, pitäisikö laskuihin ottaa
vain ne pisteet joissa oikeasti sataa edes jonkin verran, vai kaikki pisteet?

\subsection sec_story_precipitation_total "precipitation_total"

\c precipitation_total tarina on muotoa

  -# "Sadesumma N millimetriä."

Ruotsiksi

  -# "Nederbördsumman N millimeter."

Englanniksi

  -# "Total precipitation N millimeters."

Käytetyt fraasit ovat

  - "sadesumma"
  - "millimetriä"

\subsection sec_story_precipitation_range "precipitation_range"

\c precipitation_range tarina on muotoa

  -# "Sadesumma yli N millimetriä."
  -# "Sadesumma N millimetriä."
  -# "Sadesumma N...M millimetriä."

Ruotsiksi

  -# "Nederbördsumman över N millimeter."
  -# "Nederbördsumman N millimeter."
  -# "Nederbördsumman N...M millimeter."

Englanniksi

  -# "Total precipitation over N millimeters."
  -# "Total precipitation N millimeters."
  -# "Total precipitation N...M millimeters."

Päättelyssä käytetään muuttujina alueen minimi- ja maksimisadesummaa,
sekä optionaalista muuttujaa
\code
textgen::[kappale]::story::precipitation_range::maxrain
\endcode

Jos muuttujan arvo on asetettu lukemaksi X ja minimisadesumma on
vähintään X, palautetaan tarina 1. Jos minimi ja maksimi ovat samoja,
palautetaan tarina 2. Muuten palautetaan tarina 3.

Käytetyt fraasit ovat

  - "sadesumma"
  - "yli"
  - "millimetriä"

\subsection sec_story_precipitation_classification "precipitation_classification"

\c precipitation_classification tarina on muotoa

  -# "Sadesumma yli N millimetriä."
  -# "Sadesumma monin paikoin yli N millimetriä."
  -# "Sadesumma paikoin yli N millimetriä."
  -# "Sadesumma 0 millimetriä."
  -# "Sadesumma N...M millimetriä."
  -# "Sadesumma N...M millimetriä, paikoin enemmän."
  -# "Sadesumma N...M millimetriä, monin paikoin enemmän."

Ruotsiksi

  -# "Nederbördsumman över N millimeter."
  -# "Nederbördsumman på många håll över N millimeter."
  -# "Nederbördsumman lokat över N millimeter."
  -# "Nederbördsumman 0 millimeter."
  -# "Nederbördsumman N...M millimeter."
  -# "Nederbördsumman N...M millimeter, lokalt mera."
  -# "Nederbördsumman N...M millimeter, mera på många håll."

Englanniksi

  -# "Total precipitation over N millimeters."
  -# "Total precipitation in many places over N millimeters."
  -# "Total precipitation in some places over N millimeters."
  -# "Total precipitation 0 millimeters."
  -# "Total precipitation N...M millimeters."
  -# "Total precipitation N...M millimeters, more in some places."
  -# "Total precipitation N...M millimeters, more in many places."

Päättelyssä käytetään muuttujina alueen minimi- ja maksimisadesummaa,
sekä optionaalisia muuttujia
\code
textgen::[kappale]::story::precipitation_classification::maxlimit1 = [0-100]
textgen::[kappale]::story::precipitation_classification::maxlimit2 = [0-100]
textgen::[kappale]::story::precipitation_classification::limit1 = [0-100]
textgen::[kappale]::story::precipitation_classification::limit2 = [0-100]
textgen::[kappale]::story::precipitation_classification::classlimits = [range1,range2,...]
\endcode
Teksti valitaan seuraavalla logiikalla

  -# Kaikista luokista haetaan maksimi sademäärä X
  -# Jos sadesumman maksimi on yli X
     -# Jos sadesumman minimi on yli X palautetaan fraasi 1
     -# Jos sadesumma ylittää asetetun raja-arvon \c maxlimit2 riittävän
        monessa pisteessä, palautetaan fraasi 2.
     -# Jos sadesumma ylittää asetetun raja-arvon \c maxlimit1 riittävän
        monessa pisteessä, palautetaan fraasi 3.
     -# Palautetaan fraasi 1.
  -# Jos sadesumman maksimi on 0, palautetaan fraasi 4.
  -# Lasketaan sadesumman keskiarvo ja maksimi.
  -# Muodostetaan sadeluokka keskiarvon perusteella. Jos useampi luokka
     on mahdollinen, valitaan se niistä ensimmäinen.
  -# Jos maksimi kuuluu samaan luokkaa, palautetaan fraasi 5.
  -# Jos alueellinen ylitysprosentti ylittää rajan \c limit2, palautetaan
     fraasi 6. Jos rajaa ei ole asetettu, ei fraasia 6 koskaan palauteta.
  -# Jos alueellinen ylitysprosentti ylittää rajan \c limit1, palautetaan
     fraasi 7. Jos rajaa ei ole asetettu, ei fraasia 7 koskaan palauteta.
  -# Palautetaan fraasi 5.

Käytetyt fraasit ovat

  - "sadesumma"
  - "paikoin"
  - "monin paikoin"
  - "yli"
  - "millimetriä"
  - "paikoin enemmän"
  - "monin paikoin enemmän"

PS. Tarinan nimi ei ole \c precipitation_class, koska
koodauskonventioiden mukaan PrecipitationStory luokkaan tulisi metodi
nimeltä class, joka ei ole sallittua.

\section sec_froststory FrostStory luokka

TextGen::FrostStory luokka hallitsee hallaan liittyvät tarinat.

\subsection sec_story_frost_mean "frost_mean"

Aikavälin hallan todennäköisyyksistä valitaan keskiarvo tekstiä varten.

\c frost_mean tarina on muotoa

 -# ""
 -# "Hallan todennäköisyys on N%."
 -# "Ankaran hallan todennäköisyys on N%".

Ruotsiksi

 -# ""
 -# "Sannolikheten för nattfrost är N%."
 -# "Sannolikheten för stark nattforst är N%".

Englanniksi

 -# ""
 -# "Probability of frost is N%."
 -# "Probability of severe frost is N%".

Tarina valitaan perustuen muuttujiin
\code
textgen::[kappale]::story::frost_mean::severe_frost_limit = [0-100]
textgen::[kappale]::story::frost_mean::frost_limit = [0-100]
textgen::[kappale]::story::frost_mean::precision = [0-100]
\endcode
Jos ankaran hallan todennäköisyys on vähintään \c severe_frost_limit,
palautetaan fraasi 3. Muuten jos hallan todennäköisyys on vähintään
\c frost_limit, palautetaan fraasi 2. Muuten palautetaan tyhjä tarina.

Todennäköisyydet pyöristetään muuttujan \c precision tarkkuuteen.
Yleisimmin käytettäneen tarkkuutta 10.

Käytetyt fraasit ovat

 - "hallan todennäköisyys"
 - "ankaran hallan todennäköisyys"
 - "on"

\subsection sec_story_frost_maximum "frost_maximum"

Aikavälin hallan todennäköisyyksistä valitaan maksimi tekstiä varten.

\c frost_maximum tarina on muotoa

 -# ""
 -# "Hallan todennäköisyys on N%."
 -# "Ankaran hallan todennäköisyys on N%".

Ruotsiksi

 -# ""
 -# "Sannolikheten för nattfrost är N%."
 -# "Sannolikheten för stark nattforst är N%".

Englanniksi

 -# ""
 -# "Probability of frost is N%."
 -# "Probability of severe frost is N%".

Tarina valitaan perustuen muuttujiin
\code
textgen::[kappale]::story::frost_maximum::severe_frost_limit = [0-100]
textgen::[kappale]::story::frost_maximum::frost_limit = [0-100]
textgen::[kappale]::story::frost_mean::precision = [0-100]
\endcode
Jos ankaran hallan todennäköisyys on vähintään \c severe_frost_limit,
palautetaan fraasi 3. Muuten jos hallan todennäköisyys on vähintään
\c frost_limit, palautetaan fraasi 2. Muuten palautetaan tyhjä tarina.

Todennäköisyydet pyöristetään muuttujan \c precision tarkkuuteen.
Yleisimmin käytettäneen tarkkuutta 10.

Käytetyt fraasit ovat

 - "hallan todennäköisyys"
 - "ankaran hallan todennäköisyys"
 - "on"

\subsection sec_story_frost_range "frost_range"

Aikavälin hallan todennäköisyyksistä valitaan minimi ja maksimi
tekstiä varten.

\c frost_range tarina on muotoa

 -# ""
 -# "Hallan todennäköisyys on N%."
 -# "Ankaran hallan todennäköisyys on N%".
 -# "Hallan todennäköisyys on N-M%."
 -# "Ankaran hallan todennäköisyys on N-M%."

Ruotsiksi

 -# ""
 -# "Sannolikheten för nattfrost är N%."
 -# "Sannolikheten för stark nattforst är N%".
 -# "Sannolikheten för nattfrost är N-M%."
 -# "Sannolikheten för stark nattforst är N-M%".

Englanniksi

 -# ""
 -# "Probability of frost is N%."
 -# "Probability of severe frost is N%".
 -# "Probability of frost is N-M%."
 -# "Probability of severe frost is N-M%".

Tarina valitaan perustuen muuttujiin
\code
textgen::[kappale]::story::frost_maximum::severe_frost_limit = [0-100]
textgen::[kappale]::story::frost_maximum::frost_limit = [0-100]
textgen::[kappale]::story::frost_mean::precision = [0-100]
\endcode
Jos ankaran hallan todennäköisyys on vähintään \c severe_frost_limit,
palautetaan fraasi 3. Muuten jos hallan todennäköisyys on vähintään
\c frost_limit, palautetaan fraasi 2. Muuten palautetaan tyhjä tarina.

Todennäköisyydet pyöristetään muuttujan \c precision tarkkuuteen.
Yleisimmin käytettäneen tarkkuutta 10.

Jos pyöristetyt minimi- ja maksimitodennäköisyydet ovat samoja,
sanotaan vain yksi lukema eikä lukuväliä. Poikkeuksena jos maksimi
on nolla palautetaan tyhjä fraasi.

Käytetyt fraasit ovat

 - "hallan todennäköisyys"
 - "ankaran hallan todennäköisyys"
 - "on"

\subsection sec_story_frost_maxtwonights "frost_maxtwonights"

Tässä tapauksessa aikajakson pituus täytyy olla vähintään yksi yö, ja
enintään kaksi yötä. Jos jakson pituus on yksi yö, palautetaan jokin
tarinoista

 -# ""
 -# "Hallan todennäköisyys on N%."
 -# "Ankaran hallan todennäköisyys on N%".

Ruotsiksi

 -# ""
 -# "Sannolikheten för nattfrost är N%."
 -# "Sannolikheten för stark nattforst är N%".

Englanniksi

 -# ""
 -# "Probability of frost is N%."
 -# "Probability of severe frost is N%".

Tarina valitaan perustuen muuttujiin
\code
textgen::[kappale]::story::frost_maxtwonights::severe_frost_limit = [0-100]
textgen::[kappale]::story::frost_maxtwonights::frost_limit = [0-100]
textgen::[kappale]::story::frost_maxtwonights::precision = [0-100]
\endcode
Jos ankaran hallan todennäköisyys on vähintään \c severe_frost_limit,
palautetaan fraasi 3. Muuten jos hallan todennäköisyys on vähintään
\c frost_limit, palautetaan fraasi 2. Muuten palautetaan tyhjä tarina.

Todennäköisyydet pyöristetään muuttujan \c precision tarkkuuteen.
Yleensä käytetään tarkkuutta 10.

Yö määritellään ajanjaksoksi välillä
\code
textgen::[kappale]::story::frost_maxtwonights::starthour = [0-23]
textgen::[kappale]::story::frost_maxtwonights::endhour = [0-23]
\endcode
missä starthour > endhour (esim 18 > 06).

Jos jakson pituus on kaksi yötä, palautetaan jokin tarinoista

 -# "Hallan todennäköisyys on viikonpäivän vastaisena yönä x%"
    -# + ", seuraavana yönä ankaran hallan todennäköisyys on x%."
    -# + ", seuraavana yönä x%."
    -# + ", seuraava yö on lämpimämpi."
 -# "Ankaran hallan todennäköisyys on viikonpäivän vastaisena yönä x%"
    -# + ", seuraavana yönä x%."
    -# + ", seuraavana yönä hallan todennäköisyys on x%."
    -# + ", "seuraava yö on huomattavasti lämpimämpi."

Ruotsiksi

 -# "Sannolikheten för nattfrost är natten mot veckodag x%",
    -# + ", följande natt sannolikheten för stark nattfrost är x%."
    -# + ", följande natt x%."
    -# + ", följande natt är varmare."
 -# "Sannolikheten för stark nattfrost är natten mot veckodag x%",
    -# + ", följande natt x%".
    -# + ", följande natt sannolikheten för nattfrost är x%".
    -# + ", följande natt är betydligt varmare."

Englanniksi

 -# "Probability of frost is on Monday night x%",
    -# + ", the following night probability of severe frost is x%",
    -# + ", the following night x%."
    -# + ", the following night is warmer."
 -# "Probability of severe frost is on Monday night x%",
    -# + ", the following night x%".
    -# + ", the following night probability of frost is x%."
    -# + ", the following night is significantly warmer."


Käytetyt fraasit ovat

 - "hallan todennäköisyys"
 - "ankaran hallan todennäköisyys"
 - "on"
 - "N-vastaisena yönä", N=1-7
 - "seuraavana yönä"
 - "seuraava yö"
 - "lämpimämpi"
 - "huomattavasti lämpimämpi"

\section sec_relativehumidity_story RelativeHumidityStory luokka

TextGen::RelativeHumidityStory luokka hallitsee suhteelliseen
kosteuteen liittyvät tarinat.

\subsection sec_story_relativehumidity_lowest "relativehumidity_lowest"

Tarina \c relativehumidity_lowest on muotoa

 -# "Alin suhteellinen kosteus on viikonpäivänä x%"
    -# ", viikonpäivänä suurempi."
    -# ", viikonpäivänä hieman suurempi."
    -# ", viikonpäivänä sama."
    -# ", viikonpäivänä hieman pienempi."
    -# ", viikonpäivänä pienempi."

Ruotsiksi

 -# "Den lägsta relativa fuktigheten är på veckodag x%"
    -# ", på veckodag större."
    -# ", på veckodag något större."
    -# ", på veckodag densamma."
    -# ", på veckodag något mindre."
    -# ", på veckodag mindre."

Englanniksi

 -# "The smallest relative humidity on weekday is x%"
    -# ", on weekday greater."
    -# ", on weekday somewhat greater."
    -# ", on weekday the same."
    -# ", on weekday somewhat smaller."
    -# ", on weekday smaller."

Tarina soveltuu yhden/kahden vuorokauden ennusteisiin. Sivulausetta ei
ole yhden vuorokauden ennusteissa.

Ensimmäisestä vuorokaudesta ei kerrota mitään, jos sen alkuaika on vähintään
\code
textgen::[kappale]::story::relativehumidity_lowest::maxstarthour = [0-23]
\endcode
Toisesta vuorokaudesta ei kerrota mitään, jos sen loppu on yli
\code
textgen::[kappale]::story::relativehumidity_lowest::minendhour = [0-23]
\endcode

Suhteellinen kosteus pyöristetään tarkkuuteen
\code
textgen::[kappale]::story::relativehumidity_lowest::precision = [0-100]
\endcode

Erotuksen suuruus päätellään seuraavista rajoista
\code
textgen::[kappale]::story::relativehumidity_lowest::greater = 20
textgen::[kappale]::story::relativehumidity_lowest::somewhat_greater = 10
textgen::[kappale]::story::relativehumidity_lowest::somewhat_smaller = 10
textgen::[kappale]::story::relativehumidity_lowest::smaller = 20
\endcode
seuraavasti tuloksista \c humidity2 ja \c humidity1

 -# Jos \c humidity2 - \c humidity1 >= \c greater, valitaan "suurempi"
 -# Jos \c humidity2 - \c humidity1 >= \c somewhat_greater, valitaan "hieman suurempi"
 -# Jos \c humidity1 - \c humidity2 >= \c smaller, valitaan "pienempi"
 -# Jos \c humidity1 - \c humidity2 >= \c somewhat_smaller, valitaan "hieman pienempi"
 -# Muuten valitaan "sama"

Tarvittavat fraasit ovat

 - "alin suhteellinen kosteus"
 - "on"
 - "N-na", N=1.7 (maanantaina, tiistaina jne)
 - "suurempi"
 - "hieman suurempi"
 - "sama"
 - "hieman pienempi"
 - "pienempi" 

*/
