/*!
\page page_tarinat Tarinat

<ol>
<li>\ref sec_tarina</li>
<li>\ref sec_storyfactory</li>
<li>\ref sec_specialstory</li>
<li>\ref sec_temperaturestory</li>
 <ol>
 <li>\ref sec_story_temperature_mean</li>
 <li>\ref sec_story_temperature_meanmax</li>
 <li>\ref sec_story_temperature_meanmin</li>
 <li>\ref sec_story_temperature_dailymax</li>
 <li>\ref sec_story_temperature_nightlymin</li>
 <li>\ref sec_story_temperature_weekly_minmax</li>
 <li>\ref sec_story_temperature_weekly_averages</li>
 <li>\ref sec_story_temperature_weekly_averages_trend</li>
 </ol>
<li>\ref sec_precipitationstory</li>
 <ol>
 <li>\ref sec_story_precipitation_total</li>
 <li>\ref sec_story_precipitation_range</li>
 <li>\ref sec_story_precipitation_classification</li>
 </ol>
<li>\ref sec_froststory</li>
 <ol>
 <li>\ref sec_story_frost_mean</li>
 <li>\ref sec_story_frost_maximum</li>
 <li>\ref sec_story_frost_range</li>
 <li>\ref sec_story_frost_maxtwonights</li>
 </ol>
<li>\ref sec_relativehumidity_story</li>
 <ol>
 <li>\ref sec_story_relativehumidity_lowest</li>
 </ol>
</ol>

\section sec_tarina Mikä on tarina

Tarina on yksittäinen kappale, joka sisältää yksittäiseen sääparametriin
liittyvän kuvauksen. Kappale voi olla tyhjä jos parametrista ei ole
mitään kerrottavaa, tai se voi koostua yhdestä tai useammasta virkkeestä.


\section sec_storyfactory StoryFactory namespace

TextGen::StoryFactory namespace sisältää create funktion,
jolla voidaan luoda erikseen nimettyjä tarinoita.


\section sec_specialstory Erikoistarinat

Kaksi normaalista poikkeavaa tarinaa ovat "none", joka palauttaa tyhjän
Paragraph objektin, sekä "break", joka palauttaa Paragraph objektin
joka sisältää vain yhden Delimiter objektin. Delimiter objektin
sisältö on newline-merkki.

\section sec_temperaturestory TemperatureStory luokka

TextGen::TemperatureStory luokka hallitsee lämpötilaan liittyvät tarinat.

\subsection sec_story_temperature_mean "temperature_mean"

\c temperature_mean tarina on muotoa

  -# "Keskilämpötila N astetta."

Ruotsiksi

  -# "Medeltemperaturen N grader."

Englanniksi

  -# "Mean temperature N degrees."

Käytetyt fraasit ovat

  - "keskilämpötila"
  - "astetta"

Tarinan laskennassa generoidut funktiot voi ylikuormittaa seuraavasti:
\code
# Mean(Mean(Temperature)):
textgen::[kappale]::story::temperature_mean::fake::mean = [result]
\endcode

\subsection sec_story_temperature_meanmax "temperature_meanmax"

\c temperature_meanmax tarina on muotoa

  -# "Keskimääräinen ylin lämpötila N astetta."

Ruotsiksi

  -# "Den högsta temperaturen i medeltal N grader."

Englanniksi

  -# "Mean maximum temperature N degrees."

Käytetyt fraasit ovat

  - "keskimääräinen ylin lämpötila"
  - "astetta"

Tarinan laskennassa generoidut funktiot voi ylikuormittaa seuraavasti:
\code
# Mean(Mean(MaxTemperature)):
textgen::[kappale]::story::temperature_meanmax::fake::mean = [result]
\endcode

\subsection sec_story_temperature_meanmin "temperature_meanmin"

\c temperature_meanmin tarina on muotoa

  -# "Keskimääräinen alin lämpötila N astetta."

Ruotsiksi

  -# "Den lägsta temperaturen i medeltal N grader."

Englanniksi

  -# "Mean minimum temperature N degrees."

Käytetyt fraasit ovat

  - "keskimääräinen alin lämpötila"
  - "astetta"

Tarinan laskennassa generoidut funktiot voi ylikuormittaa seuraavasti:
\code
# Mean(Mean(MinTemperature)):
textgen::[kappale]::story::temperature_meanmin::fake::mean = [result]
\endcode

\subsection sec_story_temperature_dailymax "temperature_dailymax"

\c temperature_dailymax tarina on muotoa

  -# "Päivän ylin lämpötila on viikonpäivänä noin x astetta"
  -# "Päivän ylin lämpötila on viikonpäivänä x...y astetta"

Ruotsiksi

  -# "Dagens högsta temperatur är på veckodag cirka x grader"
  -# "Dagens högsta temperatur är på veckodag x...y grader"

Englanniksi

  -# "The maximum day temperature on Weekday is about x degrees"
  -# "The maximum day temperature on Weekday is x...y degrees"

Sivulauseessa jatketaan tarvittaessa

  -# ", seuraavana päivänä huomattavasti korkeampi"
  -# ", seuraavana päivänä korkeampi"
  -# ", seuraavana päivänä vähän korkeampi"
  -# ", seuraavana päivänä suunnilleen sama"
  -# ", seuraavana päivänä vähän alempi"
  -# ", seuraavana päivänä alempi"
  -# ", seuraavana päivänä huomattavasti alempi"

tai 

  -# ", viikonpäivänä huomattavasti korkeampi"
  -# ", viikonpäivänä korkeampi"
  -# ", viikonpäivänä vähän korkeampi"
  -# ", viikonpäivänä suunnilleen sama"
  -# ", viikonpäivänä vähän alempi"
  -# ", viikonpäivänä alempi"
  -# ", viikonpäivänä huomattavasti alempi"

jos muuttujan
\code
textgen::[kappale]::story::temperature_dailymax::prefer_dayname = [bool]
\endcode
arvo on true.

Ruotsiksi lauseet ovat

  -# ", på följande dag betydligt högre."
  -# ", på följande dag högre."
  -# ", på följande dag något högre."
  -# ", på följande dag ungefär densamma."
  -# ", på följande dag något lägre."
  -# ", på följande dag lägre."
  -# ", på följande dag betydligt lägre."

tai alkuosana on "på veckodag"

Englanniksi lauseet ovat

  -# ", the following day significantly higher."
  -# ", the following day higher."
  -# ", the following day somewhat higher."
  -# ", the following day about the same."
  -# ", the following day somewhat lower."
  -# ", the following day lower."
  -# ", the following day significantly lower."

Komparatiivin valinta perustuu muuttujiin
\code
textgen::[kappale]::story::temperature_dailymax::significantly_greater = [N]
textgen::[kappale]::story::temperature_dailymax::greater = [N]
textgen::[kappale]::story::temperature_dailymax::somewhat_greater = [N]
textgen::[kappale]::story::temperature_dailymax::somewhat_smaller = [N]
textgen::[kappale]::story::temperature_dailymax::smaller = [N]
textgen::[kappale]::story::temperature_dailymax::significantly_smaller = [N]
\endcode
ja laskettuihin lämpötilaväleihin. Jos ensimmäisen päivän ylin on
A1...A2 ja seuraavan B1...B2 valitaan

  -# Fraasi 1, jos B2-A2 >= \c significantly_greater
  -# Fraasi 2, jos B2-A2 >= \c greater
  -# Fraasi 3, jos B2-A2 >= \c somewhat_greater
  -# Fraasi 7, jos B2-A2 >= \c significantly_smaller
  -# Fraasi 6, jos B2-A2 >= \c smaller
  -# Fraasi 5, jos B2-A2 >= \c somewhat_smaller
  -# Fraasi 4 muutoin

Jos päiviä on useampia, luetellaan jatkossa jokaiselle päivälle päivän
ylin sivulauseena seuraavasti

  - ", viikonpäivänä noin x astetta"
  - ", viikonpäivänä x...y astetta"

Valinta yksittäisen arvon ja intervallin välillä tehdään perustuen muuttujiin
\code
textgen::[kappale]::story::temperature_dailymax::mininterval = [1-]
textgen::[kappale]::story::temperature_dailymax::always_interval_zero = [bool]
\endcode
Jos intervallin pituus on vähintään \c mininterval, sanotaan intervalli,
muuten keskiarvo. Poikkeuksena jos nolla kuuluu intervalliin ja
\c always_interval_zero on true, sanotaan aina intervalli.

Tarvittavat fraasit ovat

 - "päivän ylin lämpötila"
 - "on"
 - "N-na", N=1-7
 - "noin"
 - "astetta"
 - "seuraavana päivänä"
 - "huomattavasti korkeampi"
 - "korkeampi"
 - "vähän korkeampi"
 - "suunnilleen sama"
 - "vähän matalampi"
 - "matalampi"
 - "huomattavasti matalampi"

\subsection sec_story_temperature_nightlymin "temperature_nightlymin"

\c temperature_nightlymin tarina on muotoa

  -# "Yön alin lämpötila on viikonpäivän vastaisena yönä noin x astetta"
  -# "Yän alin lämpötila on viikonpäivän vastaisena yönä x...y astetta"

Ruotsiksi

  -# "Dagens lägsta temperatur är på natten mot veckodag cirka x grader"
  -# "Dagens lägsta temperatur är på natten mot veckodag x...y grader"

Englanniksi

  -# "The minimum night temperature on Weekday night is about x degrees"
  -# "The minimum night temperature on Weekday night is x...y degrees"

  -# ", seuraavana yönä huomattavasti korkeampi"
  -# ", seuraavana yönä korkeampi"
  -# ", seuraavana yönä vähän korkeampi"
  -# ", seuraavana yönä suunnilleen sama"
  -# ", seuraavana yönä vähän alempi"
  -# ", seuraavana yönä alempi"
  -# ", seuraavana yönä huomattavasti alempi"

tai 

  -# ", viikonpäivän vastaisena yönä huomattavasti korkeampi"
  -# ", viikonpäivän vastaisena yönä korkeampi"
  -# ", viikonpäivän vastaisena yönä vähän korkeampi"
  -# ", viikonpäivän vastaisena yönä suunnilleen sama"
  -# ", viikonpäivän vastaisena yönä vähän alempi"
  -# ", viikonpäivän vastaisena yönä alempi"
  -# ", viikonpäivän vastaisena yönä huomattavasti alempi"

jos muuttujan
\code
textgen::[kappale]::story::temperature_nightlymin::prefer_dayname = [bool]
\endcode
arvo on true.

Ruotsiksi lauseet ovat

  -# ", på följande natt betydligt högre."
  -# ", på följande natt högre."
  -# ", på följande natt något högre."
  -# ", på följande natt ungefär densamma."
  -# ", på följande natt något lägre."
  -# ", på följande natt lägre."
  -# ", på följande natt betydligt lägre."

tai alkuosana on "på veckodag"

Englanniksi lauseet ovat

  -# ", the following night significantly higher."
  -# ", the following night higher."
  -# ", the following night somewhat higher."
  -# ", the following night about the same."
  -# ", the following night somewhat lower."
  -# ", the following night lower."
  -# ", the following night significantly lower."

Komparatiivin valinta perustuu muuttujiin
\code
textgen::[kappale]::story::temperature_nightlymin::significantly_greater = [N]
textgen::[kappale]::story::temperature_nightlymin::greater = [N]
textgen::[kappale]::story::temperature_nightlymin::somewhat_greater = [N]
textgen::[kappale]::story::temperature_nightlymin::somewhat_smaller = [N]
textgen::[kappale]::story::temperature_nightlymin::smaller = [N]
textgen::[kappale]::story::temperature_nightlymin::significantly_smaller = [N]
\endcode
ja laskettuihin lämpötilaväleihin. Jos ensimmäisen yön alin on
A1...A2 ja seuraavan B1...B2 valitaan

  -# Fraasi 1, jos B2-A2 >= \c significantly_greater
  -# Fraasi 2, jos B2-A2 >= \c greater
  -# Fraasi 3, jos B2-A2 >= \c somewhat_greater
  -# Fraasi 7, jos B2-A2 >= \c significantly_smaller
  -# Fraasi 6, jos B2-A2 >= \c smaller
  -# Fraasi 5, jos B2-A2 >= \c somewhat_smaller
  -# Fraasi 4 muutoin

Jos öitä on useampia, luetellaan jatkossa jokaiselle yölle yön alin
sivulauseena seuraavasti

  - ", viikonpäivän vastaisena yönä noin x astetta"
  - ", viikonpäivän vastaisena yönä x...y astetta"

Valinta yksittäisen arvon ja intervallin välillä tehdään perustuen muuttujiin
\code
textgen::[kappale]::story::temperature_nightlymin::mininterval = [1-]
textgen::[kappale]::story::temperature_nightlymin::always_interval_zero = [bool]
\endcode
Jos intervallin pituus on vähintään \c mininterval, sanotaan intervalli,
muuten keskiarvo. Poikkeuksena jos nolla kuuluu intervalliin ja
\c always_interval_zero on true, sanotaan aina intervalli.

Tarvittavat fraasit ovat

 - "yön alin lämpötila"
 - "on"
 - "N-na", N=1-7
 - "N-vastaisena yönä"
 - "noin"
 - "astetta"
 - "seuraavana yönä"
 - "korkeampi"
 - "vähän korkeampi"
 - "suunnilleen sama"
 - "vähän matalampi"
 - "matalampi"

\subsection sec_story_temperature_weekly_minmax "temperature_weekly_minmax"

Ajanjakson täytyy olla vähintään 2 vuorokautta. Alkamis- ja loppumisaikojen
täytyy olla 06 tai 18.

Tarinat ovat muotoa

  -# "Päivien ylin lämpötila on A...B astetta, öiden alin lämpötila C...D astetta."
  -# "Päivien ylin lämpötila on noin X astetta, öiden alin lömpötila noin Y astetta."

Ruotsiksi

  -# "Dagstemperaturerna är A...B grader, natttemperaturerna C...D grader."
  -# "Dagstemperaturerna är cirka X grader, natttemperaturerna circa Y grader."

Englanniksi

  -# "Daily maximum temperature is A...B degrees, nightly minimum temperatures C...D degrees."
  -# "Daily maximum temperature is about X degrees, nightly minimum temperatures about Y degrees."

Jos intervalli on pienempi kuin
\code
textgen::[kappale]::story::temperature_weekly_minmax::mininterval = [1-]
\endcode
typistetään intervalli yhdeksi noin-lukemaksi.
Jos muuttuja
\code
textgen::[kappale]::story::temperature_weekly_minmax::always_interval_zero = [bool]
\endcode
on true, intervallit joihin lukema 0 kuuluu esitetään aina
intervallina, jos ala- ja ylärajat eroavat asteenkaan.
Jos muuttuja
\code
textgen::[kappale]::story::temperature_weekly_minmax::emphasize_night_minimum = [bool]
\endcode
arvo on true, ei yön alimmalle lämpötilalle esitetä ylärajaa.

Tarvittavat fraasit ovat

  - "päivien ylin lämpötila"
  - "öiden alin lämpötila"
  - "on"
  - "noin"
  - "astetta"

\subsection sec_story_temperature_weekly_averages "temperature_weekly_averages"

Ajanjakson täytyy olla vähintään 2 vuorokautta. Alkamis- ja loppumisaikojen
täytyy olla 06 tai 18.

Tarinat ovat muotoa

  -# "Päivälämpötila on A...B astetta, yölämpötila C...D astetta."
  -# "Päivälämpötila on noin X astetta, yölämpötila noin Y astetta."

Ruotsiksi

  -# "Dagstemperaturen är A...B grader, natttemperaturerna C...D grader."
  -# "Dagstemperaturen är cirka X grader, natttemperaturerna circa Y grader."

Englanniksi

  -# "Daily maximum temperature is A...B degrees, nightly minimum temperature C...D degrees."
  -# "Daily maximum temperature is about X degrees, nightly minimum temperatures about Y degrees."

Jos intervalli on pienempi kuin
\code
textgen::[kappale]::story::temperature_weekly_averages::mininterval = [1-]
\endcode
typistetään intervalli yhdeksi noin-lukemaksi.
Jos muuttuja
\code
textgen::[kappale]::story::temperature_weekly_averages::always_interval_zero = [bool]
\endcode
on true, intervallit joihin lukema 0 kuuluu esitetään aina
intervallina, jos ala- ja ylärajat eroavat asteenkaan.
Jos muuttuja
\code
textgen::[kappale]::story::temperature_weekly_averages::emphasize_night_minimum = [bool]
\endcode
arvo on true, ei yön alimmalle lämpötilalle esitetä ylärajaa.

Tarvittavat fraasit ovat

  - "päivälämpötila"
  - "yölämpötila"
  - "on"
  - "noin"
  - "astetta"

\subsection sec_story_temperature_weekly_averages_trend "temperature_weekly_averages_trend"

Ajanjakson täytyy olla vähintään 2 vuorokautta. Alkamis- ja loppumisaikojen
täytyy olla 06 tai 18.

Tarinat ovat muotoa

  -# "Päivälämpötila on A...B astetta."
  -# "Päivälämpötila on noin A...B astetta."
  -# "Päivälämpötila on alussa A...B astetta, lopussa C...D astetta."
  -# "Yölämpötila on alussa A...B astetta, lopussa C...D astetta."
  -# "Yölämpötila on A...B astetta."
  -# "Yölämpötila on noin A...B astetta."
  -# "Päivälämpötila on A...B astetta, yölämpötila C...D astetta."
  -# "Päivälämpötila on noin X astetta, yölämpötila noin Y astetta."

Tarinassa on tarvittaessa kaksi erillistä virkettä.

Ruotsiksi

  -# "Dagstemperaturen är A...B grader."
  -# "Dagstemperaturen är circa A...B grader."
  -# "Dagstemperaturen är i början A...B grader, i slutet C...D grader."
  -# "Natttemperaturen är i början A...B grader, i slutet C...D grader."
  -# "Natttemperaturen är A...B grader."
  -# "Natttemperaturen är circa A...B grader."
  -# "Dagstemperaturen är A...B grader, natttemperaturen C...D grader."
  -# "Dagstemperaturen är circa X grader, natttemperaturen circa Y grader."

Englanniksi

  -# "Daily maximum temperature is A...B degrees."
  -# "Daily maximum temperature is about A...B degrees."
  -# "Daily maximum temperature is in the beginning A...B degrees, in the end C...D degrees."
  -# "Daily minimum temperaturen is in the beginning A...B degrees, in the end C...D degrees."
  -# "Daily minimum temperaturen is A...B degrees."
  -# "Daily minimum temperaturen is about A...B degrees."
  -# "Daily maximum temperature is A...B degrees, natttemperaturen C...D degrees."
  -# "Daily maximum temperature is about X degrees, natttemperaturen about Y degrees."


  -# "Daily maximum temperature is A...B degrees, nightly minimum temperature C...D degrees."
  -# "Daily maximum temperature is about X degrees, nightly minimum temperatures about Y degrees."

Jos intervalli on pienempi kuin
\code
textgen::[kappale]::story::temperature_weekly_averages::mininterval = [1-]
\endcode
typistetään intervalli yhdeksi noin-lukemaksi.
Jos muuttuja
\code
textgen::[kappale]::story::temperature_weekly_averages::always_interval_zero = [bool]
\endcode
on true, intervallit joihin lukema 0 kuuluu esitetään aina
intervallina, jos ala- ja ylärajat eroavat asteenkaan.
Jos muuttuja
\code
textgen::[kappale]::story::temperature_weekly_averages::emphasize_night_minimum = [bool]
\endcode
arvo on true, ei yön alimmalle lämpötilalle esitetä ylärajaa.

Tarinassa esitetään aina ensin päivälämpötila, sitten yölämpötila.
Jos jommassa kummassa pystytään suorittamaan aikajako "aluksi"- ja
"lopuksi"-jaksoihin, tarina koostuu kahdesta virkkeestä.

<font color="red">Logiikka aikajakoon puuttuu.</font>

Tarvittavat fraasit ovat

  - "päivälämpötila"
  - "yölämpötila"
  - "on"
  - "noin"
  - "astetta"
  - "aluksi"
  - "lopuksi"

\section sec_precipitationstory PrecipitationStory luokka

TextGen::PrecipitationStory luokka hallitsee sateeseen liittyvät tarinat.

Yksi keskeinen ongelma on se, miten sadesumma määritellään. Esimerkiksi
kun puhutaan alueen keskimääräisestä sadesummasta, pitäisikö laskuihin ottaa
vain ne pisteet joissa oikeasti sataa edes jonkin verran, vai kaikki pisteet?

\subsection sec_story_precipitation_total "precipitation_total"

\c precipitation_total tarina on muotoa

  -# "Sadesumma N millimetriä."

Ruotsiksi

  -# "Nederbördsumman N millimeter."

Englanniksi

  -# "Total precipitation N millimeters."

Käytetyt fraasit ovat

  - "sadesumma"
  - "millimetriä"

Tarinan laskennassa generoidut funktiot voi ylikuormittaa seuraavasti:
\code
# Mean(Sum(Precipitation)):
textgen::[kappale]::story::precipitation_total::fake::mean = [result]
\endcode

\subsection sec_story_precipitation_range "precipitation_range"

\c precipitation_range tarina on muotoa

  -# "Sadesumma yli N millimetriä."
  -# "Sadesumma N millimetriä."
  -# "Sadesumma N...M millimetriä."

Ruotsiksi

  -# "Nederbördsumman över N millimeter."
  -# "Nederbördsumman N millimeter."
  -# "Nederbördsumman N...M millimeter."

Englanniksi

  -# "Total precipitation over N millimeters."
  -# "Total precipitation N millimeters."
  -# "Total precipitation N...M millimeters."

Päättelyssä käytetään muuttujina alueen minimi- ja maksimisadesummaa,
sekä optionaalista muuttujaa
\code
textgen::[kappale]::story::precipitation_range::maxrain
\endcode

Jos muuttujan arvo on asetettu lukemaksi X ja minimisadesumma on
vähintään X, palautetaan tarina 1. Jos minimi ja maksimi ovat samoja,
palautetaan tarina 2. Muuten palautetaan tarina 3.

Käytetyt fraasit ovat

  - "sadesumma"
  - "yli"
  - "millimetriä"

Tarinan laskennassa generoidut funktiot voi ylikuormittaa seuraavasti:
\code
# Minimum(Sum(Precipitation)):
textgen::[kappale]::story::precipitation_total::fake::minimum = [result]
# Maximum(Sum(Precipitation)):
textgen::[kappale]::story::precipitation_total::fake::maximum = [result]
\endcode

\subsection sec_story_precipitation_classification "precipitation_classification"

\c precipitation_classification tarina on muotoa

  -# "Sadesumma yli N millimetriä."
  -# "Sadesumma monin paikoin yli N millimetriä."
  -# "Sadesumma paikoin yli N millimetriä."
  -# "Sadesumma 0 millimetriä."
  -# "Sadesumma N...M millimetriä."
  -# "Sadesumma N...M millimetriä, paikoin enemmän."
  -# "Sadesumma N...M millimetriä, monin paikoin enemmän."

Ruotsiksi

  -# "Nederbördsumman över N millimeter."
  -# "Nederbördsumman på många håll över N millimeter."
  -# "Nederbördsumman lokat över N millimeter."
  -# "Nederbördsumman 0 millimeter."
  -# "Nederbördsumman N...M millimeter."
  -# "Nederbördsumman N...M millimeter, lokalt mera."
  -# "Nederbördsumman N...M millimeter, mera på många håll."

Englanniksi

  -# "Total precipitation over N millimeters."
  -# "Total precipitation in many places over N millimeters."
  -# "Total precipitation in some places over N millimeters."
  -# "Total precipitation 0 millimeters."
  -# "Total precipitation N...M millimeters."
  -# "Total precipitation N...M millimeters, more in some places."
  -# "Total precipitation N...M millimeters, more in many places."

Päättelyssä käytetään muuttujina alueen minimi- ja maksimisadesummaa,
sekä optionaalisia muuttujia
\code
textgen::[kappale]::story::precipitation_classification::maxlimit1 = [0-100]
textgen::[kappale]::story::precipitation_classification::maxlimit2 = [0-100]
textgen::[kappale]::story::precipitation_classification::limit1 = [0-100]
textgen::[kappale]::story::precipitation_classification::limit2 = [0-100]
textgen::[kappale]::story::precipitation_classification::classlimits = [range1,range2,...]
\endcode
Teksti valitaan seuraavalla logiikalla

  -# Kaikista luokista haetaan maksimi sademäärä MAXCLASS
  -# Jos sadesumman maksimi on yli MAXCLASS
     -# Jos sadesumman minimi on yli MAXCLASS palautetaan fraasi 1
     -# Jos sadesumma ylittää asetetun raja-arvon \c maxlimit2 riittävän
        monessa pisteessä, palautetaan fraasi 2.
     -# Jos sadesumma ylittää asetetun raja-arvon \c maxlimit1 riittävän
        monessa pisteessä, palautetaan fraasi 3.
     -# Muutoin palautetaan fraasi 5!!!
  -# Jos sadesumman maksimi on 0, palautetaan fraasi 4.
  -# Lasketaan sadesumman keskiarvo ja maksimi.
  -# Muodostetaan sadeluokka keskiarvon perusteella. Jos useampi luokka
     on mahdollinen, valitaan se niistä ensimmäinen.
  -# Jos maksimi kuuluu samaan luokkaa, palautetaan fraasi 5.
  -# Jos alueellinen ylitysprosentti ylittää rajan \c limit2, palautetaan
     fraasi 6. Jos rajaa ei ole asetettu, ei fraasia 6 koskaan palauteta.
  -# Jos alueellinen ylitysprosentti ylittää rajan \c limit1, palautetaan
     fraasi 7. Jos rajaa ei ole asetettu, ei fraasia 7 koskaan palauteta.
  -# Palautetaan fraasi 5.

Käytetyt fraasit ovat

  - "sadesumma"
  - "paikoin"
  - "monin paikoin"
  - "yli"
  - "millimetriä"
  - "paikoin enemmän"
  - "monin paikoin enemmän"

PS. Tarinan nimi ei ole \c precipitation_class, koska
koodauskonventioiden mukaan PrecipitationStory luokkaan tulisi metodi
nimeltä class, joka ei ole sallittua.

Tarinan laskennassa generoidut funktiot voi ylikuormittaa seuraavasti:
\code
# Mean(Sum(Precipitation))
textgen::[kappale]::story::precipitation_classification::fake::mean = [result]
# Minimum(Sum(Precipitation))
textgen::[kappale]::story::precipitation_classification::fake::minimum = [result]
# Maximum(Sum(Precipitation))
textgen::[kappale]::story::precipitation_classification::fake::maximum = [result]
# Percentage(Sum(Precipitation))
textgen::[kappale]::story::precipitation_classification::fake::percentage = [result]
\endcode

\section sec_froststory FrostStory luokka

TextGen::FrostStory luokka hallitsee hallaan liittyvät tarinat.

\subsection sec_story_frost_mean "frost_mean"

Aikavälin hallan todennäköisyyksistä valitaan keskiarvo tekstiä varten.

\c frost_mean tarina on muotoa

 -# ""
 -# "Hallan todennäköisyys on N%."
 -# "Ankaran hallan todennäköisyys on N%".

Ruotsiksi

 -# ""
 -# "Sannolikheten för nattfrost är N%."
 -# "Sannolikheten för stark nattforst är N%".

Englanniksi

 -# ""
 -# "Probability of frost is N%."
 -# "Probability of severe frost is N%".

Tarina valitaan perustuen muuttujiin
\code
textgen::[kappale]::story::frost_mean::severe_frost_limit = [0-100]
textgen::[kappale]::story::frost_mean::frost_limit = [0-100]
textgen::[kappale]::story::frost_mean::precision = [0-100]
\endcode
Jos ankaran hallan todennäköisyys on vähintään \c severe_frost_limit,
palautetaan fraasi 3. Muuten jos hallan todennäköisyys on vähintään
\c frost_limit, palautetaan fraasi 2. Muuten palautetaan tyhjä tarina.

Todennäköisyydet pyöristetään muuttujan \c precision tarkkuuteen.
Yleisimmin käytettäneen tarkkuutta 10.

Käytetyt fraasit ovat

 - "hallan todennäköisyys"
 - "ankaran hallan todennäköisyys"
 - "on"

Tarinan laskennassa generoidut funktiot voi ylikuormittaa seuraavasti:
\code
# Mean(Maximum(Frost)):
textgen::[kappale]::story::frost_mean::fake::mean = [result]
# Mean(Maximum(SevereFrost)):
textgen::[kappale]::story::frost_mean::fake::severe_mean = [result]
\endcode

\subsection sec_story_frost_maximum "frost_maximum"

Aikavälin hallan todennäköisyyksistä valitaan maksimi tekstiä varten.

\c frost_maximum tarina on muotoa

 -# ""
 -# "Hallan todennäköisyys on N%."
 -# "Ankaran hallan todennäköisyys on N%".

Ruotsiksi

 -# ""
 -# "Sannolikheten för nattfrost är N%."
 -# "Sannolikheten för stark nattforst är N%".

Englanniksi

 -# ""
 -# "Probability of frost is N%."
 -# "Probability of severe frost is N%".

Tarina valitaan perustuen muuttujiin
\code
textgen::[kappale]::story::frost_maximum::severe_frost_limit = [0-100]
textgen::[kappale]::story::frost_maximum::frost_limit = [0-100]
textgen::[kappale]::story::frost_mean::precision = [0-100]
\endcode
Jos ankaran hallan todennäköisyys on vähintään \c severe_frost_limit,
palautetaan fraasi 3. Muuten jos hallan todennäköisyys on vähintään
\c frost_limit, palautetaan fraasi 2. Muuten palautetaan tyhjä tarina.

Todennäköisyydet pyöristetään muuttujan \c precision tarkkuuteen.
Yleisimmin käytettäneen tarkkuutta 10.

Käytetyt fraasit ovat

 - "hallan todennäköisyys"
 - "ankaran hallan todennäköisyys"
 - "on"

Tarinan laskennassa generoidut funktiot voi ylikuormittaa seuraavasti:
\code
# Maximum(Maximum(Frost)):
textgen::[kappale]::story::frost_maximum::fake::maximum = [result]
# Maximum(Maximum(SevereFrost)):
textgen::[kappale]::story::frost_maximum::fake::severe_maximum = [result]
\endcode

\subsection sec_story_frost_range "frost_range"

Aikavälin hallan todennäköisyyksistä valitaan minimi ja maksimi
tekstiä varten.

\c frost_range tarina on muotoa

 -# ""
 -# "Hallan todennäköisyys on N%."
 -# "Ankaran hallan todennäköisyys on N%".
 -# "Hallan todennäköisyys on N-M%."
 -# "Ankaran hallan todennäköisyys on N-M%."

Ruotsiksi

 -# ""
 -# "Sannolikheten för nattfrost är N%."
 -# "Sannolikheten för stark nattforst är N%".
 -# "Sannolikheten för nattfrost är N-M%."
 -# "Sannolikheten för stark nattforst är N-M%".

Englanniksi

 -# ""
 -# "Probability of frost is N%."
 -# "Probability of severe frost is N%".
 -# "Probability of frost is N-M%."
 -# "Probability of severe frost is N-M%".

Tarina valitaan perustuen muuttujiin
\code
textgen::[kappale]::story::frost_maximum::severe_frost_limit = [0-100]
textgen::[kappale]::story::frost_maximum::frost_limit = [0-100]
textgen::[kappale]::story::frost_mean::precision = [0-100]
\endcode
Jos ankaran hallan todennäköisyys on vähintään \c severe_frost_limit,
palautetaan fraasi 3. Muuten jos hallan todennäköisyys on vähintään
\c frost_limit, palautetaan fraasi 2. Muuten palautetaan tyhjä tarina.

Todennäköisyydet pyöristetään muuttujan \c precision tarkkuuteen.
Yleisimmin käytettäneen tarkkuutta 10.

Jos pyöristetyt minimi- ja maksimitodennäköisyydet ovat samoja,
sanotaan vain yksi lukema eikä lukuväliä. Poikkeuksena jos maksimi
on nolla palautetaan tyhjä fraasi.

Käytetyt fraasit ovat

 - "hallan todennäköisyys"
 - "ankaran hallan todennäköisyys"
 - "on"

Tarinan laskennassa generoidut funktiot voi ylikuormittaa seuraavasti:
\code
# Maximum(Maximum(Frost)):
textgen::[kappale]::story::frost_range::fake::maximum = [result]
# Minimum(Maximum(Frost)):
textgen::[kappale]::story::frost_range::fake::minimum = [result]
# Maximum(Maximum(SevereFrost)):
textgen::[kappale]::story::frost_range::fake::severe_maximum = [result]
# Minimum(Maximum(SevereFrost)):
textgen::[kappale]::story::frost_range::fake::severe_minimum = [result]
\endcode

\subsection sec_story_frost_maxtwonights "frost_maxtwonights"

Tässä tapauksessa aikajakson pituus täytyy olla vähintään yksi yö, ja
enintään kaksi yötä. Jos jakson pituus on yksi yö, palautetaan jokin
tarinoista

 -# ""
 -# "Hallan todennäköisyys on N%."
 -# "Ankaran hallan todennäköisyys on N%".

Ruotsiksi

 -# ""
 -# "Sannolikheten för nattfrost är N%."
 -# "Sannolikheten för stark nattforst är N%".

Englanniksi

 -# ""
 -# "Probability of frost is N%."
 -# "Probability of severe frost is N%".

Tarina valitaan perustuen muuttujiin
\code
textgen::[kappale]::story::frost_maxtwonights::severe_frost_limit = [0-100]
textgen::[kappale]::story::frost_maxtwonights::frost_limit = [0-100]
textgen::[kappale]::story::frost_maxtwonights::precision = [0-100]
\endcode
Jos ankaran hallan todennäköisyys on vähintään \c severe_frost_limit,
palautetaan fraasi 3. Muuten jos hallan todennäköisyys on vähintään
\c frost_limit, palautetaan fraasi 2. Muuten palautetaan tyhjä tarina.

Todennäköisyydet pyöristetään muuttujan \c precision tarkkuuteen.
Yleensä käytetään tarkkuutta 10.

Yö määritellään ajanjaksoksi välillä
\code
textgen::[kappale]::story::frost_maxtwonights::starthour = [0-23]
textgen::[kappale]::story::frost_maxtwonights::endhour = [0-23]
\endcode
missä starthour > endhour (esim 18 > 06).

Jos jakson pituus on kaksi yötä, palautetaan jokin tarinoista

 -# "Hallan todennäköisyys on viikonpäivän vastaisena yönä x%"
    -# + ", seuraavana yönä ankaran hallan todennäköisyys on x%."
    -# + ", seuraavana yönä x%."
    -# + ", seuraava yö on lämpimämpi."
 -# "Ankaran hallan todennäköisyys on viikonpäivän vastaisena yönä x%"
    -# + ", seuraavana yönä x%."
    -# + ", seuraavana yönä hallan todennäköisyys on x%."
    -# + ", "seuraava yö on huomattavasti lämpimämpi."

Ruotsiksi

 -# "Sannolikheten för nattfrost är natten mot veckodag x%",
    -# + ", följande natt sannolikheten för stark nattfrost är x%."
    -# + ", följande natt x%."
    -# + ", följande natt är varmare."
 -# "Sannolikheten för stark nattfrost är natten mot veckodag x%",
    -# + ", följande natt x%".
    -# + ", följande natt sannolikheten för nattfrost är x%".
    -# + ", följande natt är betydligt varmare."

Englanniksi

 -# "Probability of frost is on Monday night x%",
    -# + ", the following night probability of severe frost is x%",
    -# + ", the following night x%."
    -# + ", the following night is warmer."
 -# "Probability of severe frost is on Monday night x%",
    -# + ", the following night x%".
    -# + ", the following night probability of frost is x%."
    -# + ", the following night is significantly warmer."


Käytetyt fraasit ovat

 - "hallan todennäköisyys"
 - "ankaran hallan todennäköisyys"
 - "on"
 - "N-vastaisena yönä", N=1-7
 - "seuraavana yönä"
 - "seuraava yö"
 - "lämpimämpi"
 - "huomattavasti lämpimämpi"

\section sec_relativehumidity_story RelativeHumidityStory luokka

TextGen::RelativeHumidityStory luokka hallitsee suhteelliseen
kosteuteen liittyvät tarinat.

\subsection sec_story_relativehumidity_lowest "relativehumidity_lowest"

Tarina \c relativehumidity_lowest on muotoa

 -# "Alin suhteellinen kosteus on viikonpäivänä x%"
    -# ", viikonpäivänä suurempi."
    -# ", viikonpäivänä hieman suurempi."
    -# ", viikonpäivänä sama."
    -# ", viikonpäivänä hieman pienempi."
    -# ", viikonpäivänä pienempi."

Ruotsiksi

 -# "Den lägsta relativa fuktigheten är på veckodag x%"
    -# ", på veckodag större."
    -# ", på veckodag något större."
    -# ", på veckodag densamma."
    -# ", på veckodag något mindre."
    -# ", på veckodag mindre."

Englanniksi

 -# "The smallest relative humidity on weekday is x%"
    -# ", on weekday greater."
    -# ", on weekday somewhat greater."
    -# ", on weekday the same."
    -# ", on weekday somewhat smaller."
    -# ", on weekday smaller."

Tarina soveltuu yhden/kahden vuorokauden ennusteisiin. Sivulausetta ei
ole yhden vuorokauden ennusteissa.

Ensimmäisestä vuorokaudesta ei kerrota mitään, jos sen alkuaika on vähintään
\code
textgen::[kappale]::story::relativehumidity_lowest::maxstarthour = [0-23]
\endcode
Toisesta vuorokaudesta ei kerrota mitään, jos sen loppu on yli
\code
textgen::[kappale]::story::relativehumidity_lowest::minendhour = [0-23]
\endcode

Suhteellinen kosteus pyöristetään tarkkuuteen
\code
textgen::[kappale]::story::relativehumidity_lowest::precision = [0-100]
\endcode

Erotuksen suuruus päätellään seuraavista rajoista
\code
textgen::[kappale]::story::relativehumidity_lowest::greater = 20
textgen::[kappale]::story::relativehumidity_lowest::somewhat_greater = 10
textgen::[kappale]::story::relativehumidity_lowest::somewhat_smaller = 10
textgen::[kappale]::story::relativehumidity_lowest::smaller = 20
\endcode
seuraavasti tuloksista \c humidity2 ja \c humidity1

 -# Jos \c humidity2 - \c humidity1 >= \c greater, valitaan "suurempi"
 -# Jos \c humidity2 - \c humidity1 >= \c somewhat_greater, valitaan "hieman suurempi"
 -# Jos \c humidity1 - \c humidity2 >= \c smaller, valitaan "pienempi"
 -# Jos \c humidity1 - \c humidity2 >= \c somewhat_smaller, valitaan "hieman pienempi"
 -# Muuten valitaan "sama"

Tarvittavat fraasit ovat

 - "alin suhteellinen kosteus"
 - "on"
 - "N-na", N=1.7 (maanantaina, tiistaina jne)
 - "suurempi"
 - "hieman suurempi"
 - "sama"
 - "hieman pienempi"
 - "pienempi" 

Tarinan laskennassa generoidut funktiot voi ylikuormittaa seuraavasti:
\code
# Minimum(Minimum(Temperature)):
textgen::[kappale]::story::relativehumidity_lowest::fake::day1::minimum = [result]
textgen::[kappale]::story::relativehumidity_lowest::fake::day2::minimum = [result]
\endcode

*/
